<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Pretty Good Receiving by Robert Moore</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Pretty Good Receiving</h1>
        <h2>Pretty good receiver placement for transmit-only sensor networks</h2>
        <a href="https://github.com/romoore/jun-simulate" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>Transmit Only Receiver Placement</h2>

<p>Transmit-Only (TO) sensor networks enable smaller and cheaper sensors,
reduced energy consumption, and simpler over-the-air protocols.  The challenge
in these networks is to ensure that the vast majority (over 99%) of packets
sent from a sensor actually reach a network sink.  To assist in analyzing the
possibilities of receiver placements, this project simulates placing receivers
at various locations within the sensor network in order to minimize lost
packets due to collisions.</p>

<h2>The Algorithm</h2>
<p>ALOHA got it wrong! If you think that colliding transmissions always
cause packet loss, read-up on <a
href="http://en.wikipedia.org/wiki/Capture_effect">the capture effect</a>. So,
given a set of transmitter locations, where is the best place to put your
receivers if you wish to maximize the number of packets captured during a
collision?</p>

<p>The first step, after determining transmitter locations, is to go about calculating the set of
pairwise capture disks for each pair of transmitters.  That is, for each
pair of transmitters in a 2-dimensional plane (t<sub>1</sub>, t<sub>2</sub>), 
the capture disk is the area where a receiver would be able to decode
t<sub>1</sub>'s packet during a collision with t<sub>2</sub>'s packet. The
math to calculate this is beyond the scope of this page, but you can <a
href="https://github.com/romoore/jun-simulate/blob/master/src/main/java/edu/rutgers/winlab/junsim/Main.java">check out
the code</a> for more details.</p>

<p>Once you have your capture disks, you then collect a set of possible
receiver locations as the centers of the disks and the intersections of all
disks.  Then, for each possible solution point, determine how many capture
disks contain that point.  Sort the solution points in non-increasing order of
capture disks, and select the maximum.  Remove this point and its associated
disks and repeat until you've found enough receivers or run out of disks or
solution points.</p>

<h2>Compiling</h2>
<p>The code is built most easily with <a href="http://maven.apache.org">Apache
Maven</a>.  In the main directory, just type:
<pre><code>mvn clean package</code></pre>
and the code should compile itself.  If not, send me a message and I'll see if
I can't get it working.

<h2>How to Use</h2>
<p>Once you've compiled the code with maven, your <code>target</code>
directory should have at least 2 JAR archives: with dependencies and without.
The simplest way to execute the application is the jar-with-dependencies
archive.  It takes a single parameter, a configuration file (a <a
href="https://github.com/romoore/jun-simulate/blob/master/src/main/resources/config.xml">sample is
included</a>) which holds all of the runtime parameters.  If your
configuration file is "myconfig.xml", then run the application like this:
<pre><code>java -jar jun-simulate-1.0.0-SNAPSHOT-jar-with-dependencies.jar myconfig.xml</code></pre>
you should see output on the console almost immediately.</p>

<h3>The Configuration File</h3>
<p>The configuration file is an XML-based set of runtime parameters. An
example is provided in the source, and this section is a description of each
parameter in more detail.</p>

<dl>
  <dt>beta: float</dt>
  <dd>The relative distance between a receiver and pair of
  transmitters.  If the distance between the receiver and each transmitter
  differs by at least this much, then the receiver should be able to capture
  the packet with the stronger signal power.</dd>
  <dt>numTransmitters: integer</dt>
  <dd>The number of transmitter locations to simulate.  <strong>Be careful with
  this value!</strong> Even a small number of transmitters (30) can create a
  very large number of solution points (&gt;400,000).  Be sure your computer
  has sufficient memory and processor resources.  For 50 transmitters, you
  should allocate at least 2GB of RAM to the Java heap.</dd>
  <dt>numReceivers: integer</dt>
  <dd>The maximum number of receivers to place.  The simulator will place 1
  receiver at a time until either no more solution points or capture disks
  remain, or until this limit is reached.</dd>
  <dt>radioPower: float</dt>
  <dd>The transmit power of the transmitters' radios in dBm.Currently unused,
  but in future versions will probably enable the auto-calculation of
  <em>beta</em> if not explicitly provided. </dd>
  <dt>radioAlpha: float</dt>
  <dd>The attenuation constant of the local environment.  Currently unused,
  but in future versions will probably enable the auto-calculation of
  <em>beta</em> if not explicitly provided.</dd>
  <dt>squareWidth: float</dt>
  <dd>The width of the transmitter placement rectangle.</dd>
  <dt>squareHeight: float</dt>
  <dd>The height of the transmitter placement rectangle.</dd>
  <dt>universeWidth: float</dt>
  <dd>The width of the "universe" in which receivers may be placed.  Should be
  greater than <em>squareWidth</em>.</dd>
  <dt>universeHeight: float</dt>
  <dd>The height of the "universe" in which receivers may be placed.  Should
  be greater than <em>squareHeight</em>.</dd>
  <dt>randomSeed: int</dt>
  <dd>A seed for the random number generator.  Allows repeatable experiments.
  The random number generator is used for transmitter coordinate
  generation.</dd>
  <dt>showDisplay: boolean</dt>
  <dd>Determines whether the simulator should run in a very simple
  interactive/debug mode (<em>true</em>) or just generate output
  (<em>false</em>).</dd>
  <dt>numTrials: integer</dt>
  <dd>The number of simulations to run before computing aggregate
  statistics.</dd>
  <dt>outputFileName: string</dt>
  <dd>The filename of the statistics output file.  The file is written in
  comma-separated values (CSV) format.</dd>
  <dt>numThreads: integer</dt>
  <dd>The number of threads to spawn and also the number of concurrent
  simulations to run.  Given that simulations can consume a lot of RAM, be
  careful how many you run simultaneously.</dd>
  <dt>generateImages: boolean</dt>
  <dd>If <em>true</em>, then the simulator will produce PNG files in its
  working directory each time it notices an output with a large number of
  receivers (&gt 50% of transmitters) that don't "cover" all capture
  disks.</dd>
</dl>

<h2>Screenshots</h2>
<p> The screenshots below are available when the configuration parameter
<code>generateImages</code> is set to <code>true</code>. The simulator will
generate 1920x1080 px PNG images for each step of the algorithm.</p>

<p>Below is a set of images taken from an example run with 5 transmitters
randomly placed around the area.</p>

<table >
  <tr>
    <td><a href="images/0000.png"><img src="images/0000-tn.png"
    height="225" width="400" ></img></a><p>Arrangement of the
    transmitters within the coordinate plane.</p></td>
    <td><a href="images/0010.png"><img src="images/0010-tn.png" height="225"
    width="400" ></img></a><p>Calculating the capture disks of the
    transmitter pairs. </p></td>
    <td><a href="images/0020.png"><img src="images/0020-tn.png" height="225"
    width="400" ></img></a><p>Generating potential receiver locations
    from the capture disks.</p></td>
  </tr>
</table>
<table>
  <tr>
    <td><a href="images/1001.png"><img src="images/1001-tn.png" height="225"
    width="400" ></img></a><p>The first receiver is placed.</p></td>
    <td><a href="images/1002.png"><img src="images/1002-tn.png" height="225"
    width="400" ></img></a><p>The second receiver is placed.</p></td>
    <td><a href="images/1003.png"><img src="images/1003-tn.png" height="225"
    width="400" ></img></a><p>The third receiver is placed.</p></td>
    <td><a href="images/1004.png"><img src="images/1004-tn.png" height="225"
    width="400" ></img></a><p>The fourth and final receiver is placed.</p></td>
  </tr>
</table>
<p>Some slightly nicer-looking screenshots using different numbers of
transmitters and receivers.</p>
<table>
  <tr>
    <td><a href="images/screenshot4.png"><img src="images/screenshot4-tn.png" height="225"
    width="400" ></img></a><p>30 transmitters, 15 receivers.</p></td>
    <td><a href="images/screenshot1.png"><img src="images/screenshot1-tn.png" height="225"
    width="400" ></img></a><p>20 transmitters, 12 receivers.</p></td>
    <td><a href="images/screenshot2.png"><img src="images/screenshot2-tn.png" height="225"
    width="400" ></img></a><p>15 transmitters, 8 receivers.</p></td>
    <td><a href="images/screenshot3.png"><img src="images/screenshot3-tn.png" height="225"
    width="400" ></img></a><p>10 transmitters, 6 receivers.</p></td>
  </tr>
</table>

<h3>Screenshot Legend</h3>
<ul>
  <li>White "T" - Barely visible unless you look, this is the location of the
  transmitters.</li>
  <li>Blue "R" - This is where a receiver was chosen to be placed.  The number
  next to it indicates how many capture disks contain it. For example, "R80"
  means that the point is contained in 80 capture disks.</li>
  <li>Green Dots - These are the centers and intersection points of the
  capture disks.  These are treated as possible solution points for placing
  receivers, and each one is evaluated.  The ones shown in the screenshots were
  not chosen.</li>
  <li>Red Circles - These are capture disks that don't include any chosen
  receivers.  This is what I was looking for when I wrote the visualization,
  because I wanted to see why the coverage rate was so low even with a lot of
  receivers.</li>
  <li>Yellow Lines - These originate at the receiver locations and terminate
  at the centers of the capture disks that contain the receiver.</li>
</ul>



        </section>

        <aside id="sidebar">
          <a href="https://github.com/romoore/jun-simulate/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/romoore/jun-simulate/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a
          href="https://github.com/romoore/jun-simulate">Pretty Good
          Receiving</a> is maintained by <a
          href="https://github.com/romoore">Robert Moore</a>. Algorithm by
          Junichiro Fukuyama.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
